## Hydropolitical Tension and Institutional Vulnerability Dataset Pre-processing
This file describes the data pre-processing that was done to [the Relative Risk Category for Hydropolitical Tension and Institutional Vulnerability](http://transboundarywaters.science.oregonstate.edu/content/transboundary-waters-assessment-programme-river-basins-component) for [display on Resource Watch](http://resourcewatch.org/data/explore/bc30d648-2a4f-4f5f-8a1c-b7a471e412bd).

The source provided the data in a zipped file containing two shapefiles - one of which contains the data for 310 international basins and the other contains the data for 812 basin country units. Both shapefiles were used.

Below, we describe the steps used to reformat the shapefiles to upload it to Carto.

1. Read in the two polygon shapefiles as geopandas dataframes.
2. Rename the columns in the dataframe for basin country units so column names are consistent across dataframes.
3. Create a new column 'type' in both dataframes to store whether the polygon is a basin or basin country unit.
4. Concatenate the two dataframes.
5. Project the data so its coordinate system is WGS84.
6. Convert the data type of numeric columns to float.
7. Convert the column names to lowercase to meet the column name requirements of Carto.
8. Convert the geometries of the data from shapely objects to geojsons.
9. Create a new column from the index of the dataframe to use as a unique id column (cartodb_id) in Carto.
10. Convert the NaNs in numeric columns to None to meet the import requirements of Carto.

Please see the [Python script](https://github.com/resource-watch/data-pre-processing/blob/master/wat_065_rw0_hydropoli_tension_and_institu_vulnerability/wat_065_rw0_hydropoli_tension_and_institu_vulnerability_processing.py) for more details on this processing.

You can view the processed {Resource Watch public title} dataset [on Resource Watch](http://resourcewatch.org/data/explore/bc30d648-2a4f-4f5f-8a1c-b7a471e412bd).

You can also download the original dataset [directly through Resource Watch](https://wri-public-data.s3.amazonaws.com/resourcewatch/wat_065_rw0_hydropoli_tension_and_institu_vulnerability.zip), or [from the source website](http://transboundarywaters.science.oregonstate.edu/sites/transboundarywaters.science.oregonstate.edu/files/Database/Data/Spatial/TFDDSpatialData_Public_20181119.zip).

###### Note: This dataset processing was done by [Yujing Wu](https://www.wri.org/profile/yujing-wu), and QC'd by [Yujing Wu](https://www.wri.org/profile/yujing-wu).
